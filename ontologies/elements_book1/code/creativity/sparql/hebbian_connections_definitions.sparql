# link weights for the elements of the class Definition

PREFIX core: <https://www.foom.com/core#>

SELECT
  ?o1
  ?o2
  (COUNT(*) AS ?pair_count)
WHERE {
  ?s a core:definition .
  {
    ?s core:defines ?o1, ?o2 .
  }
  UNION
  {
    ?s core:defines           ?o1 .
    ?o1 core:definition_refers_to ?o2 .
  }
  FILTER( STR(?o1) < STR(?o2) )
}
GROUP BY ?o1 ?o2 ?s
ORDER BY DESC(?pair_count)

# SELECT
#     ?s ?o1 ?o2
# WHERE {
#     ?s  a <https://www.foom.com/core#definition> .
#     { ?s <https://www.foom.com/core#defines> ?o1, ?o2 .
#     FILTER ( STR(?o1) < STR(?o2) ) }
#     UNION
#     { ?s <https://www.foom.com/core#defines> ?o1 .
#      ?o1 <https://www.foom.com/core#definition_refers_to> ?o2 .
#     FILTER ( STR(?o1) < STR(?o2) ) }
# }
# ORDER BY ?s